{
  "version": 3,
  "sources": ["../../vue-screen-utils/out-tsc/utils/window.js", "../../vue-screen-utils/out-tsc/use/mediaQuery.js", "../../vue-screen-utils/out-tsc/use/resizeObserver.js", "../../vue-screen-utils/out-tsc/use/darkMode.js", "../../vue-screen-utils/out-tsc/utils/normalizeScreens.js", "../../vue-screen-utils/out-tsc/utils/buildMediaQuery.js", "../../vue-screen-utils/out-tsc/utils/defaultScreens.js", "../../vue-screen-utils/out-tsc/utils/initScreens.js", "../../vue-screen-utils/out-tsc/use/screens.js", "../../vue-screen-utils/out-tsc/plugins/screens.js"],
  "sourcesContent": ["export function windowExists() {\n    return typeof window !== 'undefined';\n}\nexport function windowHasFeature(feature) {\n    return windowExists() && feature in window;\n}\n//# sourceMappingURL=window.js.map", "import { ref, onMounted, onUnmounted } from 'vue';\nimport { windowHasFeature } from '../utils/window';\nexport function useMediaQuery(query, callback) {\n    let mediaQuery;\n    const matches = ref(false);\n    function listener(ev) {\n        if (callback)\n            callback(ev);\n        matches.value = ev.matches;\n    }\n    function cleanup() {\n        if (mediaQuery) {\n            mediaQuery.removeEventListener('change', listener);\n            mediaQuery = undefined;\n        }\n    }\n    function setup(newQuery = query) {\n        cleanup();\n        if (windowHasFeature('matchMedia') && newQuery) {\n            mediaQuery = window.matchMedia(newQuery);\n            mediaQuery.addEventListener('change', listener);\n            matches.value = mediaQuery.matches;\n        }\n    }\n    onMounted(() => setup());\n    onUnmounted(() => cleanup());\n    return { matches, setup, cleanup };\n}\n//# sourceMappingURL=mediaQuery.js.map", "import { ref, watch, onUnmounted } from 'vue';\nimport { windowHasFeature } from '../utils/window';\nexport function useResizeObserver(target, callback, options = {}) {\n    let observer;\n    const rect = ref();\n    const listener = (...args) => {\n        if (callback)\n            callback(...args);\n        const entry = args[0][0];\n        rect.value = entry.contentRect;\n    };\n    const stopObserver = () => {\n        if (observer) {\n            observer.disconnect();\n            observer = undefined;\n        }\n    };\n    const stopWatch = watch(() => target.value, (elOrComp) => {\n        stopObserver();\n        if (windowHasFeature('ResizeObserver') && elOrComp) {\n            observer = new ResizeObserver(listener);\n            observer.observe(elOrComp.$el ?? elOrComp, options);\n        }\n    }, { immediate: true, flush: 'post' });\n    const cleanup = () => {\n        stopObserver();\n        stopWatch();\n    };\n    onUnmounted(() => cleanup());\n    return { rect, cleanup };\n}\n//# sourceMappingURL=resizeObserver.js.map", "import { ref, computed, onUnmounted, watch } from 'vue';\nimport { windowExists, windowHasFeature } from '../utils/window';\nexport function useDarkMode(config) {\n    const isDark = ref(false);\n    const displayMode = computed(() => (isDark.value ? 'dark' : 'light'));\n    let mediaQuery;\n    let mutationObserver;\n    function mqListener(ev) {\n        isDark.value = ev.matches;\n    }\n    function setupSystem() {\n        if (windowHasFeature('matchMedia')) {\n            mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\n            mediaQuery.addEventListener('change', mqListener);\n            isDark.value = mediaQuery.matches;\n        }\n    }\n    function moListener() {\n        const { selector = ':root', darkClass = 'dark' } = config.value;\n        const el = document.querySelector(selector);\n        isDark.value = el.classList.contains(darkClass);\n    }\n    function setupClass(config) {\n        const { selector = ':root', darkClass = 'dark' } = config;\n        if (windowExists() && selector && darkClass) {\n            const el = document.querySelector(selector);\n            if (el) {\n                mutationObserver = new MutationObserver(moListener);\n                mutationObserver.observe(el, {\n                    attributes: true,\n                    attributeFilter: ['class'],\n                });\n                isDark.value = el.classList.contains(darkClass);\n            }\n        }\n    }\n    function setup() {\n        stopObservers();\n        const type = typeof config.value;\n        if (type === 'string' && config.value.toLowerCase() === 'system') {\n            setupSystem();\n        }\n        else if (type === 'object') {\n            setupClass(config.value);\n        }\n        else {\n            isDark.value = !!config.value;\n        }\n    }\n    const stopWatch = watch(() => config.value, () => setup(), {\n        immediate: true,\n    });\n    function stopObservers() {\n        if (mediaQuery) {\n            mediaQuery.removeEventListener('change', mqListener);\n            mediaQuery = undefined;\n        }\n        if (mutationObserver) {\n            mutationObserver.disconnect();\n            mutationObserver = undefined;\n        }\n    }\n    function cleanup() {\n        stopObservers();\n        stopWatch();\n    }\n    onUnmounted(() => cleanup());\n    return {\n        isDark,\n        displayMode,\n        cleanup,\n    };\n}\n//# sourceMappingURL=darkMode.js.map", "function resolveValue({ 'min-width': _minWidth, min = _minWidth, max, raw } = {}) {\n    return { min, max, raw };\n}\n/**\n * A function that normalizes the various forms that the screens object can be\n * provided in.\n *\n * Input(s):\n *   - ['100px', '200px'] // Raw strings\n *   - { sm: '100px', md: '200px' } // Object with string values\n *   - { sm: { min: '100px' }, md: { max: '100px' } } // Object with object values\n *   - { sm: [{ min: '100px' }, { max: '200px' }] } // Object with object array (multiple values)\n *\n * Output(s):\n *   - [{ name: 'sm', values: [{ min: '100px', max: '200px' }] }] // List of objects, that contains multiple values\n */\nexport function normalizeScreens(screens, root = true) {\n    if (Array.isArray(screens)) {\n        return screens.map((screen) => {\n            if (root && Array.isArray(screen)) {\n                throw new Error('The tuple syntax is not supported for `screens`.');\n            }\n            if (typeof screen === 'string') {\n                return { name: screen.toString(), values: [{ min: screen, max: undefined }] };\n            }\n            let [name, options] = screen;\n            name = name.toString();\n            if (typeof options === 'string') {\n                return { name, values: [{ min: options, max: undefined }] };\n            }\n            if (Array.isArray(options)) {\n                return { name, values: options.map((option) => resolveValue(option)) };\n            }\n            return { name, values: [resolveValue(options)] };\n        });\n    }\n    return normalizeScreens(Object.entries(screens ?? {}), false);\n}\n//# sourceMappingURL=normalizeScreens.js.map", "// This function gratuitously borrowed from TailwindCSS\n// https://github.com/tailwindcss/tailwindcss/blob/master/src/util/buildMediaQuery.js\nexport default function buildMediaQuery(screenValues) {\n    return screenValues\n        .map((sv) => {\n        if (sv.raw !== undefined)\n            return sv.raw;\n        return [sv.min && `(min-width: ${sv.min})`, sv.max && `(max-width: ${sv.max})`].filter(Boolean).join(' and ');\n    })\n        .join(', ');\n}\n//# sourceMappingURL=buildMediaQuery.js.map", "export default {\n    xs: '0px',\n    sm: '640px',\n    md: '768px',\n    lg: '1024px',\n    xl: '1280px',\n};\n//# sourceMappingURL=defaultScreens.js.map", "import { computed, reactive } from 'vue';\nimport { normalizeScreens } from './normalizeScreens';\nimport buildMediaQuery from './buildMediaQuery';\nimport defaultScreens from './defaultScreens';\nimport { windowHasFeature } from './window';\nexport const defaultInjectKey = '$screens';\nexport function initScreens(screens) {\n    const state = reactive({\n        screens: normalizeScreens(screens || defaultScreens),\n        queries: {},\n        matches: {},\n        hasSetup: false,\n    });\n    function refreshMatches() {\n        Object.entries(state.queries).forEach(([key, query]) => {\n            state.matches[key] = query.matches;\n        });\n    }\n    function mapList(config) {\n        return computed(() => Object.keys(state.matches)\n            .filter((key) => state.matches[key] === true && config.hasOwnProperty(key))\n            .map((key) => config[key]));\n    }\n    const list = computed(() => Object.keys(state.matches).filter((k) => state.matches[k]));\n    function mapCurrent(config, def) {\n        return computed(() => {\n            const curr = current.value;\n            if (curr && config.hasOwnProperty(curr))\n                return config[curr];\n            return def;\n        });\n    }\n    const current = computed(() => {\n        const arr = list.value;\n        if (arr.length)\n            return arr[arr.length - 1];\n        return '';\n    });\n    function cleanup() {\n        Object.values(state.queries).forEach((query) => query.removeEventListener('change', refreshMatches));\n        state.queries = {};\n        state.matches = {};\n    }\n    if (!state.hasSetup && windowHasFeature('matchMedia')) {\n        cleanup();\n        state.queries = state.screens.reduce((result, { name, values }) => {\n            const mediaQuery = window.matchMedia(buildMediaQuery(values));\n            mediaQuery.addEventListener('change', refreshMatches);\n            result[name] = mediaQuery;\n            return result;\n        }, {});\n        refreshMatches();\n        state.hasSetup = true;\n    }\n    return { matches: state.matches, list, mapList, current, mapCurrent, cleanup };\n}\n//# sourceMappingURL=initScreens.js.map", "import { onUnmounted, provide } from 'vue';\nimport { initScreens, defaultInjectKey } from '../utils/initScreens';\nexport function useScreens(screens, opts) {\n    const s = initScreens(screens);\n    provide(opts?.injectKey || defaultInjectKey, s);\n    onUnmounted(() => s.cleanup());\n    return s;\n}\n//# sourceMappingURL=screens.js.map", "import { initScreens, defaultInjectKey } from '../utils/initScreens';\nconst plugin = {\n    install: (app, screens, opts) => {\n        const s = initScreens(screens);\n        const key = opts?.injectKey || defaultInjectKey;\n        // Inject a globally available screens object method\n        app.config.globalProperties[key] = s;\n        // Provide screens object\n        app.provide(key, s);\n    },\n};\nexport default plugin;\n//# sourceMappingURL=screens.js.map"],
  "mappings": "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",
  "names": ["config"]
}
